version: '3.8'

services:
  impa-ai:
    image: your-registry/impa-ai:latest
    environment:
      # ===========================================
      # CONFIGURAÇÕES DE IFRAME EMBEDDING
      # ===========================================
      
      # Permitir ou bloquear iframe embedding
      # true = permite / false = bloqueia completamente
      - ALLOW_IFRAME_EMBEDDING=true
      
      # Política de embedding
      # ALLOWALL = qualquer domínio pode incorporar
      # SAMEORIGIN = apenas mesmo domínio
      # DENY = nenhum iframe permitido
      - IFRAME_EMBEDDING_POLICY=ALLOWALL
      
      # Domínios específicos permitidos (separados por vírgula)
      # Use * para permitir todos os domínios
      # Use lista de domínios para permitir apenas específicos
      - IFRAME_ALLOWED_DOMAINS=*
      # Exemplos:
      # - IFRAME_ALLOWED_DOMAINS=exemplo.com,*.exemplo.com,meusite.org
      # - IFRAME_ALLOWED_DOMAINS=*.impa365.com,impa365.com
      
      # ===========================================
      # OUTRAS CONFIGURAÇÕES DA APLICAÇÃO
      # ===========================================
      - NODE_ENV=production
      - SUPABASE_URL=your-supabase-url
      - SUPABASE_ANON_KEY=your-supabase-key
      # ... outras configurações
    
    ports:
      - "3000:3000"
    
    # Exemplo para diferentes cenários:
    
    # CENÁRIO 1: EMBEDDING COMPLETAMENTE BLOQUEADO
    # environment:
    #   - ALLOW_IFRAME_EMBEDDING=false
    
    # CENÁRIO 2: APENAS MESMO DOMÍNIO
    # environment:
    #   - ALLOW_IFRAME_EMBEDDING=true
    #   - IFRAME_EMBEDDING_POLICY=SAMEORIGIN
    
    # CENÁRIO 3: DOMÍNIOS ESPECÍFICOS
    # environment:
    #   - ALLOW_IFRAME_EMBEDDING=true
    #   - IFRAME_EMBEDDING_POLICY=ALLOWALL
    #   - IFRAME_ALLOWED_DOMAINS=exemplo.com,*.exemplo.com,parceiro.org
    
    # CENÁRIO 4: TODOS OS DOMÍNIOS (PADRÃO)
    # environment:
    #   - ALLOW_IFRAME_EMBEDDING=true
    #   - IFRAME_EMBEDDING_POLICY=ALLOWALL
    #   - IFRAME_ALLOWED_DOMAINS=* 